# 日期/类型
20210427 股票买卖问题含冷冻期
https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-with-cooldown/

# 题目描述
给定一个整数数组，其中第 i 个元素代表了第 i 天的股票价格 。​

设计一个算法计算出最大利润。在满足以下约束条件下，你可以尽可能地完成更多的交易（多次买卖一支股票）:

你不能同时参与多笔交易（你必须在再次购买前出售掉之前的股票）。
卖出股票后，你无法在第二天买入股票 (即冷冻期为 1 天)。
``` cpp
输入: [1,2,3,0,2]
输出: 3 
解释: 对应的交易状态为: [买入, 卖出, 冷冻期, 买入, 卖出]
```


# 思路(C++)
## 动态规划
一、初步分析
第i天结束后，手里要么有股票要么没股票
有股票时要么是当天买入，要么是在前几天买入，为了保证利润最大，要取最大值；没股票时要么是在当前卖出的，要么是在前几天卖出的，同样为了保证利润最大，要取最大值。


二、 状态定义
用dp[i][0]表示第i天结束时手中没股票时的最大利润，且没进入冷冻期
用dp[i][1]表示第i天结束时手中没有股票时的最大利润, 且进入冷冻期
用dp[i][2]表示第i天结束时手中有股票时的最大利润

三、状态转移
考虑股票买卖有一天的冷却期，即当前卖出股票之后，第二天不能再卖出，所以其影响需要体现在状态转移方程上
1. 当第i天结束时手里没有股票且没有触发进入冷冻期时，则今天不能卖出股票，说明前一天结束时没有股票，无论前一天出没触发冷冻期，都不影响今天接入没有股票的状态。dp[i][0] = max(dp[i-1][0], dp[i-1][1])
2. 当第i天结束时手里没有股票且触发进入冷冻期时，则今天一定卖出了股票，需要前一天持有股票，dp[i][1] = dp[i-1][2]+prices[i]
3. 当第i天结束时手里有股票时，分下面几种情况：
   1. 在前一天没有股票，且前一天没有触发进入冷冻期的情况下当天买入：dp[i][2] = dp[i-1][0]-prices[i]
   2. 前一天就有股票:dp[i-1][2]
   3. 所以当前一天有卖出时,dp[i][2]=max(dp[i-1][2], dp[i-1][0]-prices[i])

三、初始化和边界。
- 第一天结束后有股票利润为dp[1][2]=-prices[0]；无股票没有触发冷冻期利润为0:dp[1][0]=0；无股票触发冷冻期利润为0:dp[1][2]=0


四、结果输出
最后一天手中无股票状态的利润，max(dp[i][0], dp[i][1])即为最终答案

### 复杂度
时间复杂度：O(n)。遍历n天

空间复杂度：O(2*n) 二维n