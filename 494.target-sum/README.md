<!--
 * @Author: baisichen
 * @Date: 2021-04-28 11:14:23
 * @LastEditTime: 2021-04-28 13:43:43
 * @LastEditors: baisichen
 * @Description: 
-->
# 日期/类型
20210428 背包问题
# 题目描述
给定一个非负整数数组，a1, a2, ..., an, 和一个目标数，S。现在你有两个符号 + 和 -。对于数组中的任意一个整数，你都可以从 + 或 -中选择一个符号添加在前面。
返回可以使最终数组和为目标数 S 的所有添加符号的方法数。

``` cpp
输入：nums: [1, 1, 1, 1, 1], S: 3
输出：5
解释：
-1+1+1+1+1 = 3
+1-1+1+1+1 = 3
+1+1-1+1+1 = 3
+1+1+1-1+1 = 3
+1+1+1+1-1 = 3
一共有5种方法让最终目标和为3。
```


# 思路(C++)
## 一、通用动态规划
一、初步分析
题目可以理解为，对于一个数组nums和目标数S，将数组中数字要么加要么减，最后能得到S的方法数。对于每个数字，因为要么加要么减，所以只有两种情况，可以将其简化为一个0-1背包问题。

二、状态定义
定义dp[i][j]表示再前i个数中，通过一系列加减操作最终得到的和为j的方法数

三、状态转移
当遇到第i个数时，可以加nums[i]，也可以减nums[i]。
1. 当需要加nums[i]时，需要满足j>=nums[i]：前i个数和为j的方法数，即为前i-1个数和为j-1的方法数: dp[i][j] = dp[i-1][j-nums[i]]
2. 当需要减nums[i]时，前i个数的和为j的方法数，即为前i-1个数和为j+nums[i]的方法数：dp[i][j] = dp[i-1][j+nums[i]]
3. 综上，前i个数可以组成和为j的方法数为dp[i][j]=dp[i-1][j-nums[i]] + dp[i-1][j+nums[i]]
4. 由于看和为j时，有往前看和往后看两种情况，这里应该怎么解呢？
   1. 答：因为时第二维度的向后看，所以当计算i时，第i-1天的所有状态均已经计算完毕，这里就需要外层循环是i


三、初始化。
1. 当第一个数时，当加上此数时：dp[1][nums[i]] = 1, 当减去此数时：dp[1][-nums[i]] =1
2. 所有数最多能加到sum，最多能减到sum，所以里层循环的范围为\[-sum,sum\]
3. 当计算dp[i][-sum]或dp[i][sum]时，要以来dp[i-1][-sum-nums[i]]或dp[i-1][sum+nums[i]]，当sum恰好为1000时，会产生越界。由绝对值超过1000的情况不存在，所以方法数必然为0，所以此边界条件对dp[i][j]的贡献为0

四、结果输出
最终输出为dp[n][target]

### 复杂度
时间复杂度：O(n*target)。遍历n*target个数

空间复杂度：O(n*2001) 借用dp 

## 二、动态规划的空间优化(可惜这种思路因为初始化问题没有想到好的方案，在遇到[1000],-1000这种输入时没有AC)
一、初步分析
设任一组合，他的所有加法的和为x，所有减法和的绝对值为y，设S为这一组合的最终加和，sum为整个nums数组的和，则有
``` cpp
S=x-y
sum=x+y
>> x = (sum+S)/2
```
从上式中可以看出，当要求目标组合的加和为S时，只需要找到一个和为x=(sum+S)/2（记为target）的组合，而这个组合其他之外的数字都选剑法。
这样问题就简化为了0-1背包问题。同时也优化了空间


二、状态定义
定义dp[i][j]表示再前i个数中，和为target的组合数

三、状态转移
当遇到第i个数时，可以选也可以不选其加。
1. 当不选第i个数时，其和为j的组合数等于前i-1个数组成j的方法个数: dp[i][j]=dp[i-1][j]
2. 当选第i个数时，其和为j的组合数等于前i-1个数组成j-nums的个数:dp[i][j]=dp[i-1][j-nums[i]],(j>=nums[i])
3. 综上，前i个数可以组成和为j的方法数为dp[i][j]=dp[i-1][j] + dp[i-1][j-nums[i]]


三、初始化。
1. 前i个数和为0的组合数为1个，即什么都不选
2. 第一个数和为nums[0]个个数为1,dp[1][nums[0]]=1

四、结果输出
最终输出为dp[n][target]

### 复杂度
时间复杂度：O(n*target)。遍历n*target个数

空间复杂度：O(n*target) 借用dp 
